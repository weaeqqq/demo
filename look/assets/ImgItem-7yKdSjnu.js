import{c as O,n as w,m as y,e as j,G as F,y as U,d as q,I as L,H as W,J as G,K as H,h as R,k as K,M as J,t as V,E as B,g as Z,L as Q}from"./index-C_uv21gj.js";import{d as $,r as I,c as E,o as X,b as Y,e as ee,w as te,h as u,m as ae,T as se,n as ne,D as oe,y as ie,a as z,E as le,G as ce,k as S,l as M,t as P,q as re,v as T,H as ue,u as D}from"./index-CSmlBWGc.js";import{a as me}from"./index-cG7Q2svm.js";import{_ as de}from"./plugin-vueexport-helper-D-KMrJnu.js";function ge(e,d){let c=null,g=0;return function(...i){if(c)return;const n=Date.now()-g,f=()=>{g=Date.now(),c=!1,e.apply(this,i)};n>=d?f():c=setTimeout(f,d)}}const[fe,N]=O("back-top"),pe={right:w,bottom:w,zIndex:w,target:[String,Object],offset:y(200),immediate:Boolean,teleport:{type:[String,Object],default:"body"}};var he=$({name:fe,inheritAttrs:!1,props:pe,emits:["click"],setup(e,{emit:d,slots:c,attrs:g}){let i=!1;const n=I(!1),f=I(),h=I(),b=E(()=>j(F(e.zIndex),{right:U(e.right),bottom:U(e.bottom)})),k=a=>{var r;d("click",a),(r=h.value)==null||r.scrollTo({top:0,behavior:e.immediate?"auto":"smooth"})},t=()=>{n.value=h.value?H(h.value)>=+e.offset:!1},s=()=>{const{target:a}=e;if(typeof a=="string"){const r=document.querySelector(a);if(r)return r}else return a},o=()=>{W&&ne(()=>{h.value=e.target?s():G(f.value),t()})};return q("scroll",ge(t,100),{target:h}),X(o),Y(()=>{i&&(n.value=!0,i=!1)}),ee(()=>{n.value&&e.teleport&&(n.value=!1,i=!0)}),te(()=>e.target,o),()=>{const a=u("div",ae({ref:e.teleport?void 0:f,class:N({active:n.value}),style:b.value,onClick:k},g),[c.default?c.default():u(L,{name:"back-top",class:N("icon")},null)]);return e.teleport?[u("div",{ref:f,class:N("placeholder")},null),u(se,{to:e.teleport},{default:()=>[a]})]:a}}});const De=R(he),[ve,x,A]=O("pagination"),C=(e,d,c)=>({number:e,text:d,active:c}),be={mode:K("multi"),prevText:String,nextText:String,pageCount:y(0),modelValue:J(0),totalItems:y(0),showPageSize:y(5),itemsPerPage:y(10),forceEllipses:Boolean,showPrevButton:V,showNextButton:V};var xe=$({name:ve,props:be,emits:["change","update:modelValue"],setup(e,{emit:d,slots:c}){const g=E(()=>{const{pageCount:t,totalItems:s,itemsPerPage:o}=e,a=+t||Math.ceil(+s/+o);return Math.max(1,a)}),i=E(()=>{const t=[],s=g.value,o=+e.showPageSize,{modelValue:a,forceEllipses:r}=e;let p=1,v=s;const l=o<s;l&&(p=Math.max(a-Math.floor(o/2),1),v=p+o-1,v>s&&(v=s,p=v-o+1));for(let m=p;m<=v;m++){const _=C(m,m,m===a);t.push(_)}if(l&&o>0&&r){if(p>1){const m=C(p-1,"...");t.unshift(m)}if(v<s){const m=C(v+1,"...");t.push(m)}}return t}),n=(t,s)=>{t=Z(t,1,g.value),e.modelValue!==t&&(d("update:modelValue",t),s&&d("change",t))};oe(()=>n(e.modelValue));const f=()=>u("li",{class:x("page-desc")},[c.pageDesc?c.pageDesc():"".concat(e.modelValue,"/").concat(g.value)]),h=()=>{const{mode:t,modelValue:s,showPrevButton:o}=e;if(!o)return;const a=c["prev-text"],r=s===1;return u("li",{class:[x("item",{disabled:r,border:t==="simple",prev:!0}),B]},[u("button",{type:"button",disabled:r,onClick:()=>n(s-1,!0)},[a?a():e.prevText||A("prev")])])},b=()=>{const{mode:t,modelValue:s,showNextButton:o}=e;if(!o)return;const a=c["next-text"],r=s===g.value;return u("li",{class:[x("item",{disabled:r,border:t==="simple",next:!0}),B]},[u("button",{type:"button",disabled:r,onClick:()=>n(s+1,!0)},[a?a():e.nextText||A("next")])])},k=()=>i.value.map(t=>u("li",{class:[x("item",{active:t.active,page:!0}),B]},[u("button",{type:"button","aria-current":t.active||void 0,onClick:()=>n(t.number,!0)},[c.page?c.page(t):t.text])]));return()=>u("nav",{role:"navigation",class:x()},[u("ul",{class:x("items")},[h(),e.mode==="simple"?f():k(),b()])])}});const Ne=R(xe),ke=["src"],_e={class:"duration-time"},ye={class:"time"},Pe={class:"text"},Ie={__name:"ImgItem",props:{data:Object,checkName:String},emits:["clickItem"],setup(e,{emit:d}){const c=ie(),g=d,i=e,n=z({title:i.data.title||i.data.name||"标题",imageUrl:"",time:le(i.data.update_time),durationTime:ce(i.data.duration)});let f=["topic","vip","remen","remen2","remen3","shipin"].includes(i.data.channel)?"130px":"280px";["中文字幕","成人动漫","女优专区"].includes(i.data.tag)&&(f="280px");const h=z({height:f});let b=I();const{stop:k}=me(b,async([{isIntersecting:s}])=>{var o,a,r;if(s&&!n.imageUrl){k();const p=(o=i.data.baseConfig)==null?void 0:o.image_domain;let l=((r=(a=i.data)==null?void 0:a.thumb)!=null?r:"").replaceAll("//","/");if(l.charAt(0)!=="/"&&(l="/"+l),!l.includes(p)&&!l.startsWith("http")&&!l.endsWith(".txt?size=50x50")&&(l.endsWith(".txt")?l="".concat(l,"?size=50x50"):l="".concat(l,".txt?size=50x50")),l!=null&&l.includes("wsSecret")){n.imageUrl=l||"https://dl.gamdream.com/activity/galan/sds/mb/bg1.jpg";return}let m=p+l+D.addImgKeyParam(l);if(p){let _=await D.fetchData(p+l);m=_.indexOf("data")>=0?_:D.imgDecrypt(_)}n.imageUrl=m||"https://dl.gamdream.com/activity/galan/sds/mb/bg1.jpg"}});function t(){g("clickItem",i.checkName);const s=i.checkName&&i.checkName.includes("女优"),o={id:i.data.id};s&&(o.t=+new Date),c.push({name:s?"person":"detail",query:o})}return(s,o)=>{const a=Q;return S(),M("div",{class:"img-item",onClick:t},[P("div",{class:"img-box",ref_key:"myimg",ref:b,style:ue(h)},[n.imageUrl?(S(),M("img",{key:1,class:"img",src:n.imageUrl},null,8,ke)):(S(),re(a,{key:0,style:{"margin-top":"50px"},type:"spinner",color:"#1989fa"})),P("div",_e,T(n.durationTime),1),P("div",ye,T(n.time),1)],4),P("p",Pe,T(n.title),1)])}}},Ce=de(Ie,[["__scopeId","data-v-b00a9526"]]);export{De as B,Ce as I,Ne as P};
