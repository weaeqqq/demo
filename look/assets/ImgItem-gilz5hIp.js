import{c as O,n as w,m as y,e as j,G as F,y as U,d as q,I as L,H as G,J as H,K,h as R,k as J,M as Z,t as V,E as B,g as Q,L as W}from"./index-BPZjckKA.js";import{d as $,r as I,c as E,o as X,b as Y,e as ee,w as te,h as u,m as ae,T as ne,n as se,D as oe,y as ie,a as z,E as le,G as ce,k as S,l as M,t as P,q as re,v as T,H as ue,u as D}from"./index-DfJtTt59.js";import{a as me}from"./index-DQsggrGA.js";import{_ as de}from"./plugin-vueexport-helper-P9oraxeR.js";function ge(e,d){let c=null,g=0;return function(...l){if(c)return;const o=Date.now()-g,f=()=>{g=Date.now(),c=!1,e.apply(this,l)};o>=d?f():c=setTimeout(f,d)}}const[fe,N]=O("back-top"),pe={right:w,bottom:w,zIndex:w,target:[String,Object],offset:y(200),immediate:Boolean,teleport:{type:[String,Object],default:"body"}};var ve=$({name:fe,inheritAttrs:!1,props:pe,emits:["click"],setup(e,{emit:d,slots:c,attrs:g}){let l=!1;const o=I(!1),f=I(),v=I(),b=E(()=>j(F(e.zIndex),{right:U(e.right),bottom:U(e.bottom)})),k=n=>{var r;d("click",n),(r=v.value)==null||r.scrollTo({top:0,behavior:e.immediate?"auto":"smooth"})},t=()=>{o.value=v.value?K(v.value)>=+e.offset:!1},s=()=>{const{target:n}=e;if(typeof n=="string"){const r=document.querySelector(n);if(r)return r}else return n},i=()=>{G&&se(()=>{v.value=e.target?s():H(f.value),t()})};return q("scroll",ge(t,100),{target:v}),X(i),Y(()=>{l&&(o.value=!0,l=!1)}),ee(()=>{o.value&&e.teleport&&(o.value=!1,l=!0)}),te(()=>e.target,i),()=>{const n=u("div",ae({ref:e.teleport?void 0:f,class:N({active:o.value}),style:b.value,onClick:k},g),[c.default?c.default():u(L,{name:"back-top",class:N("icon")},null)]);return e.teleport?[u("div",{ref:f,class:N("placeholder")},null),u(ne,{to:e.teleport},{default:()=>[n]})]:n}}});const De=R(ve),[he,x,A]=O("pagination"),C=(e,d,c)=>({number:e,text:d,active:c}),be={mode:J("multi"),prevText:String,nextText:String,pageCount:y(0),modelValue:Z(0),totalItems:y(0),showPageSize:y(5),itemsPerPage:y(10),forceEllipses:Boolean,showPrevButton:V,showNextButton:V};var xe=$({name:he,props:be,emits:["change","update:modelValue"],setup(e,{emit:d,slots:c}){const g=E(()=>{const{pageCount:t,totalItems:s,itemsPerPage:i}=e,n=+t||Math.ceil(+s/+i);return Math.max(1,n)}),l=E(()=>{const t=[],s=g.value,i=+e.showPageSize,{modelValue:n,forceEllipses:r}=e;let p=1,h=s;const a=i<s;a&&(p=Math.max(n-Math.floor(i/2),1),h=p+i-1,h>s&&(h=s,p=h-i+1));for(let m=p;m<=h;m++){const _=C(m,m,m===n);t.push(_)}if(a&&i>0&&r){if(p>1){const m=C(p-1,"...");t.unshift(m)}if(h<s){const m=C(h+1,"...");t.push(m)}}return t}),o=(t,s)=>{t=Q(t,1,g.value),e.modelValue!==t&&(d("update:modelValue",t),s&&d("change",t))};oe(()=>o(e.modelValue));const f=()=>u("li",{class:x("page-desc")},[c.pageDesc?c.pageDesc():"".concat(e.modelValue,"/").concat(g.value)]),v=()=>{const{mode:t,modelValue:s,showPrevButton:i}=e;if(!i)return;const n=c["prev-text"],r=s===1;return u("li",{class:[x("item",{disabled:r,border:t==="simple",prev:!0}),B]},[u("button",{type:"button",disabled:r,onClick:()=>o(s-1,!0)},[n?n():e.prevText||A("prev")])])},b=()=>{const{mode:t,modelValue:s,showNextButton:i}=e;if(!i)return;const n=c["next-text"],r=s===g.value;return u("li",{class:[x("item",{disabled:r,border:t==="simple",next:!0}),B]},[u("button",{type:"button",disabled:r,onClick:()=>o(s+1,!0)},[n?n():e.nextText||A("next")])])},k=()=>l.value.map(t=>u("li",{class:[x("item",{active:t.active,page:!0}),B]},[u("button",{type:"button","aria-current":t.active||void 0,onClick:()=>o(t.number,!0)},[c.page?c.page(t):t.text])]));return()=>u("nav",{role:"navigation",class:x()},[u("ul",{class:x("items")},[v(),e.mode==="simple"?f():k(),b()])])}});const Ne=R(xe),ke=["src"],_e={class:"duration-time"},ye={class:"time"},Pe={class:"text"},Ie={__name:"ImgItem",props:{data:Object,checkName:String},emits:["clickItem"],setup(e,{emit:d}){const c=ie(),g=d,l=e,o=z({title:l.data.title||l.data.name||"标题",imageUrl:"",time:le(l.data.update_time),durationTime:ce(l.data.duration)});let f=["topic","vip","remen","remen2","remen3","shipin"].includes(l.data.channel)?"130px":"280px";["中文字幕","成人动漫","女优专区"].includes(l.data.tag)&&(f="280px");const v=z({height:f});let b=I();const{stop:k}=me(b,async([{isIntersecting:s}])=>{var i,n,r;if(s&&!o.imageUrl){k();const p=(i=l.data.baseConfig)==null?void 0:i.image_domain;let a=((r=(n=l.data)==null?void 0:n.thumb)!=null?r:"").replaceAll("//","/");if(a.charAt(0)!=="/"&&(a="/"+a),a="".concat(a,".txt?size="),a.includes("notice")?a=a+"750x765":a=a.includes("asset")&&a.includes("build")?a+"50x50":a.includes("asset")&&a.includes("manual")?a+"1028x1028":a+"500x281",a!=null&&a.includes("wsSecret")){o.imageUrl=a||"https://dl.gamdream.com/activity/galan/sds/mb/bg1.jpg";return}let m=p+a+D.addImgKeyParam(a);if(p){let _=await D.fetchData(p+a);m=_.indexOf("data")>=0?_:D.imgDecrypt(_)}o.imageUrl=m||"https://dl.gamdream.com/activity/galan/sds/mb/bg1.jpg"}});function t(){g("clickItem",l.checkName);const s=l.checkName&&l.checkName.includes("女优"),i={id:l.data.id};s&&(i.t=+new Date),c.push({name:s?"person":"detail",query:i})}return(s,i)=>{const n=W;return S(),M("div",{class:"img-item",onClick:t},[P("div",{class:"img-box",ref_key:"myimg",ref:b,style:ue(v)},[o.imageUrl?(S(),M("img",{key:1,class:"img",src:o.imageUrl},null,8,ke)):(S(),re(n,{key:0,style:{"margin-top":"50px"},type:"spinner",color:"#1989fa"})),P("div",_e,T(o.durationTime),1),P("div",ye,T(o.time),1)],4),P("p",Pe,T(o.title),1)])}}},Ce=de(Ie,[["__scopeId","data-v-677cbd68"]]);export{De as B,Ce as I,Ne as P};
