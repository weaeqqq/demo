import{c as O,n as P,m as k,e as A,G as F,y as C,d as q,I as L,H as G,J as H,K,h as R,k as J,M as Z,t as E,E as B,g as Q,L as W}from"./index-DGUAHLds.js";import{d as $,r as y,c as D,o as X,b as Y,e as ee,w as te,h as r,m as ae,T as ne,n as se,D as oe,y as ie,a as V,E as ce,G as le,k as I,l as M,t as _,q as re,v as w,H as ue,u as U}from"./index-OuASJVzF.js";import{a as me}from"./index-BE8aB90m.js";import{_ as de}from"./plugin-vueexport-helper-BLcuqehk.js";function ge(e,m){let c=null,d=0;return function(...s){if(c)return;const i=Date.now()-d,g=()=>{d=Date.now(),c=!1,e.apply(this,s)};i>=m?g():c=setTimeout(g,m)}}const[fe,S]=O("back-top"),pe={right:P,bottom:P,zIndex:P,target:[String,Object],offset:k(200),immediate:Boolean,teleport:{type:[String,Object],default:"body"}};var he=$({name:fe,inheritAttrs:!1,props:pe,emits:["click"],setup(e,{emit:m,slots:c,attrs:d}){let s=!1;const i=y(!1),g=y(),f=y(),v=D(()=>A(F(e.zIndex),{right:C(e.right),bottom:C(e.bottom)})),x=a=>{var l;m("click",a),(l=f.value)==null||l.scrollTo({top:0,behavior:e.immediate?"auto":"smooth"})},t=()=>{i.value=f.value?K(f.value)>=+e.offset:!1},n=()=>{const{target:a}=e;if(typeof a=="string"){const l=document.querySelector(a);if(l)return l}else return a},o=()=>{G&&se(()=>{f.value=e.target?n():H(g.value),t()})};return q("scroll",ge(t,100),{target:f}),X(o),Y(()=>{s&&(i.value=!0,s=!1)}),ee(()=>{i.value&&e.teleport&&(i.value=!1,s=!0)}),te(()=>e.target,o),()=>{const a=r("div",ae({ref:e.teleport?void 0:g,class:S({active:i.value}),style:v.value,onClick:x},d),[c.default?c.default():r(L,{name:"back-top",class:S("icon")},null)]);return e.teleport?[r("div",{ref:g,class:S("placeholder")},null),r(ne,{to:e.teleport},{default:()=>[a]})]:a}}});const Ne=R(he),[ve,b,z]=O("pagination"),T=(e,m,c)=>({number:e,text:m,active:c}),be={mode:J("multi"),prevText:String,nextText:String,pageCount:k(0),modelValue:Z(0),totalItems:k(0),showPageSize:k(5),itemsPerPage:k(10),forceEllipses:Boolean,showPrevButton:E,showNextButton:E};var xe=$({name:ve,props:be,emits:["change","update:modelValue"],setup(e,{emit:m,slots:c}){const d=D(()=>{const{pageCount:t,totalItems:n,itemsPerPage:o}=e,a=+t||Math.ceil(+n/+o);return Math.max(1,a)}),s=D(()=>{const t=[],n=d.value,o=+e.showPageSize,{modelValue:a,forceEllipses:l}=e;let h=1,u=n;const N=o<n;N&&(h=Math.max(a-Math.floor(o/2),1),u=h+o-1,u>n&&(u=n,h=u-o+1));for(let p=h;p<=u;p++){const j=T(p,p,p===a);t.push(j)}if(N&&o>0&&l){if(h>1){const p=T(h-1,"...");t.unshift(p)}if(u<n){const p=T(u+1,"...");t.push(p)}}return t}),i=(t,n)=>{t=Q(t,1,d.value),e.modelValue!==t&&(m("update:modelValue",t),n&&m("change",t))};oe(()=>i(e.modelValue));const g=()=>r("li",{class:b("page-desc")},[c.pageDesc?c.pageDesc():"".concat(e.modelValue,"/").concat(d.value)]),f=()=>{const{mode:t,modelValue:n,showPrevButton:o}=e;if(!o)return;const a=c["prev-text"],l=n===1;return r("li",{class:[b("item",{disabled:l,border:t==="simple",prev:!0}),B]},[r("button",{type:"button",disabled:l,onClick:()=>i(n-1,!0)},[a?a():e.prevText||z("prev")])])},v=()=>{const{mode:t,modelValue:n,showNextButton:o}=e;if(!o)return;const a=c["next-text"],l=n===d.value;return r("li",{class:[b("item",{disabled:l,border:t==="simple",next:!0}),B]},[r("button",{type:"button",disabled:l,onClick:()=>i(n+1,!0)},[a?a():e.nextText||z("next")])])},x=()=>s.value.map(t=>r("li",{class:[b("item",{active:t.active,page:!0}),B]},[r("button",{type:"button","aria-current":t.active||void 0,onClick:()=>i(t.number,!0)},[c.page?c.page(t):t.text])]));return()=>r("nav",{role:"navigation",class:b()},[r("ul",{class:b("items")},[f(),e.mode==="simple"?g():x(),v()])])}});const Ce=R(xe),ke=["src"],_e={class:"duration-time"},ye={class:"time"},Pe={class:"text"},Be="https://mig.xianshangshixi.com",Ie={__name:"ImgItem",props:{data:Object,checkName:String},emits:["clickItem"],setup(e,{emit:m}){const c=ie(),d=m,s=e,i=V({title:s.data.title||s.data.name||"标题",imageUrl:"",time:ce(s.data.update_time),durationTime:le(s.data.duration)});let g=["topic","vip","remen","remen2","remen3","shipin"].includes(s.data.channel)?"130px":"280px";["中文字幕","成人动漫","女优专区"].includes(s.data.tag)&&(g="280px");const f=V({height:g});let v=y();const{stop:x}=me(v,async([{isIntersecting:n}])=>{var o,a;if(n&&!i.imageUrl){x();const l=((a=(o=s.data)==null?void 0:o.thumb)==null?void 0:a.indexOf("/"))==0?s.data.thumb:"/".concat(s.data.thumb),h=Be+l;let u=await U.fetchData(h);u.includes("data:image/jpg;base64")||(u=U.imgDecrypt(u)),i.imageUrl=u||"https://dl.gamdream.com/activity/galan/sds/mb/bg1.jpg"}});function t(){d("clickItem",s.checkName);const n=s.checkName&&s.checkName.includes("女优"),o={id:s.data.id};n&&(o.t=+new Date),c.push({name:n?"person":"detail",query:o})}return(n,o)=>{const a=W;return I(),M("div",{class:"img-item",onClick:t},[_("div",{class:"img-box",ref_key:"myimg",ref:v,style:ue(f)},[i.imageUrl?(I(),M("img",{key:1,class:"img",src:i.imageUrl},null,8,ke)):(I(),re(a,{key:0,style:{"margin-top":"50px"},type:"spinner",color:"#1989fa"})),_("div",_e,w(i.durationTime),1),_("div",ye,w(i.time),1)],4),_("p",Pe,w(i.title),1)])}}},Ee=de(Ie,[["__scopeId","data-v-3fa826e3"]]);export{Ne as B,Ee as I,Ce as P};
